<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Tendency | Neon Magic</title>
    
    <!-- PWA / モバイルアプリ設定 -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- フォント -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --neon-pink: #ff00ff;
            --neon-cyan: #00ffff;
            --magic-purple: #9d00ff;
            --glass-bg: transparent; 
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-image: url('forest.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-color: #0d0514;
            color: #ffffff;
            font-family: 'Space Grotesk', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }

        /* 背景の星屑アニメーション用キャンバス */
        #star-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            border: none;
            box-shadow: none;
            padding: 20px;
            width: 100%;
            max-width: 850px;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            position: relative;
            animation: card-float 6s ease-in-out infinite;
        }

        @keyframes card-float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .left-panel { flex: 0.8; min-width: 220px; }
        .right-panel { 
            flex: 1.2; 
            min-width: 300px; 
            border-left: 1px solid rgba(255,255,255,0.2); 
            padding-left: 30px;
        }

        h1 { 
            font-family: 'Cinzel', serif;
            font-size: 2.2rem; 
            background: linear-gradient(to bottom, #fff, var(--neon-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 10px rgba(0,255,255,0.5));
            margin-bottom: 5px;
            letter-spacing: 2px;
        }

        .creator { font-size: 0.7rem; color: rgba(255,255,255,0.7); margin-bottom: 30px; letter-spacing: 3px; }

        .input-group { margin-bottom: 20px; width: 100%; }
        .input-label { display: block; font-size: 11px; color: var(--neon-cyan); margin-bottom: 8px; font-weight: bold; text-transform: uppercase; letter-spacing: 2px; }

        input {
            width: 100%; 
            display: block;
            padding: 12px 15px; 
            border-radius: 12px; 
            border: 1px solid rgba(255,255,255,0.4);
            background: rgba(0, 0, 0, 0.6);
            color: #fff; 
            font-size: 16px;
            transition: all 0.3s;
            outline: none;
        }

        input:focus {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
        }

        .btn {
            width: 100%;
            padding: 16px;
            margin-top: 20px;
            border-radius: 15px;
            background: linear-gradient(45deg, var(--magic-purple), var(--neon-pink));
            border: none;
            color: #fff;
            font-weight: bold;
            font-size: 16px;
            letter-spacing: 3px;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: scale(1.02);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.6);
            filter: brightness(1.2);
        }

        .music-control { margin-top: 25px; display: flex; align-items: center; gap: 15px; }
        .sound-toggle {
            background: rgba(0, 0, 0, 0.5); border: 2px solid var(--neon-cyan); color: var(--neon-cyan);
            width: 44px; height: 44px; border-radius: 50%; cursor: pointer;
            display: flex; justify-content: center; align-items: center; font-size: 20px;
            transition: all 0.3s;
        }
        .sound-toggle.muted { border-color: #555; color: #555; }

        .btn-reset {
            width: 100%; padding: 10px; margin-top: 30px; border-radius: 10px;
            background: transparent; border: 1px solid rgba(255,255,255,0.3);
            color: #fff; cursor: pointer; font-size: 12px;
            transition: all 0.3s;
        }

        /* --- 結果表示 --- */
        #result-display { display: none; }
        .fade-in { animation: result-in 0.8s ease-out forwards; }
        @keyframes result-in {
            from { opacity: 0; transform: translateY(20px); filter: blur(10px); }
            to { opacity: 1; transform: translateY(0); filter: blur(0); }
        }

        #res-signs { color: var(--neon-cyan); font-size: 1.2rem; font-weight: bold; margin-bottom: 10px; display: block; text-shadow: 0 0 10px #000; }
        .tagline { 
            font-size: 1.8rem; color: #fff; margin-bottom: 20px; line-height: 1.2;
            text-shadow: 0 0 15px var(--neon-pink), 2px 2px 4px #000;
        }
        .quote-box { 
            background: rgba(0, 0, 0, 0.6); border-left: 4px solid var(--neon-cyan);
            padding: 20px; margin: 25px 0; font-size: 1.5rem; color: #ffeb3b;
            text-shadow: 1px 1px 2px #000;
        }
        .details-list { list-style: none; }
        .details-list li { margin-bottom: 15px; color: #fff; font-size: 1.1rem; display: flex; align-items: center; text-shadow: 1px 1px 3px #000; }
        .details-list li::before { content: '✦'; color: var(--neon-cyan); margin-right: 12px; }

        /* シェアボタン */
        .share-btn {
            margin-top: 25px;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--neon-cyan);
            color: var(--neon-cyan);
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 14px;
            cursor: pointer;
            transition: 0.3s;
            width: 100%;
            font-family: inherit;
        }
        .share-btn:hover { background: var(--neon-cyan); color: #000; }

        @media (max-width: 700px) {
            .glass-card { flex-direction: column; }
            .right-panel { border-left: none; border-top: 1px solid rgba(255,255,255,0.3); padding-left: 0; padding-top: 30px; }
        }

        #counter { font-size: 12px; color: var(--neon-pink); margin-bottom: 10px; font-weight: bold; text-shadow: 0 0 5px #000; }
    </style>
</head>
<body>
    <!-- 背景アニメーション用 -->
    <canvas id="star-canvas"></canvas>

    <div class="glass-card">
        <div class="left-panel">
            <div id="counter"></div>            
            <h1>Cosmic Tendency</h1>
            <p class="creator">created by SHIJIMI KEN</p>
            
            <div class="input-group">
                <label class="input-label">Birth Date</label>
                <input type="date" id="birth-date">
            </div>
            
            <div class="input-group">
                <label class="input-label">Birth Time</label>
                <input type="time" id="birth-time">
            </div>
            
            <button class="btn" onclick="uranai()">ひそかにのぞく</button>
            
            <div class="music-control">
                <button id="toggle-btn" class="sound-toggle" onclick="toggleMusic()">♪</button>
                <div class="sound-notice">Atmospheric Sound</div>
            </div>

            <button class="btn-reset" onclick="resetForm()">星を並べ直す</button>
        </div>
        
        <div class="right-panel">
            <div id="result-display">
                <span id="res-signs"></span>
                <h2 class="tagline" id="res-tagline"></h2>
                <div class="quote-box" id="res-quote"></div>
                <ul id="res-details" class="details-list"></ul>
                <button class="share-btn" onclick="shareX()">この結果を空に放つ (Xでシェア)</button>
            </div>
        </div>
    </div>

    <audio id="bgm" src="bgm.mp3" loop></audio>

    <script>
        /* --- 背景アニメーションロジック --- */
        const canvas = document.getElementById('star-canvas');
        const ctx = canvas.getContext('2d');
        let stars = [];
        function initStars() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            stars = [];
            for(let i=0; i<100; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 2,
                    speed: Math.random() * 0.5 + 0.1,
                    opacity: Math.random()
                });
            }
        }
        function drawStars() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            stars.forEach(s => {
                ctx.fillStyle = `rgba(255, 255, 255, ${s.opacity})`;
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.size, 0, Math.PI*2);
                ctx.fill();
                s.y -= s.speed;
                if(s.y < 0) s.y = canvas.height;
            });
            requestAnimationFrame(drawStars);
        }
        window.addEventListener('resize', initStars);
        initStars();
        drawStars();

        /* --- 診断データ --- */
        const fortuneData = [
            { "sun": "牡羊座", "moon": "牡羊座", "tagline": "即決即行動タイプ", "details": ["思った瞬間に動く", "感情も行動も直球", "後悔は後から"], "quote": "今やろ" },
            { "sun": "牡羊座", "moon": "牡牛座", "tagline": "突っ走りたいのに慎重タイプ", "details": ["行動力と不安が共存", "挑戦したいけど安定も欲しい"], "quote": "やりたいけど怖い" },
            { "sun": "牡羊座", "moon": "双子座", "tagline": "動きながら考えるタイプ", "details": ["行動と分析が同時進行", "好奇心で動く"], "quote": "とりあえずやってみる" },
            { "sun": "牡羊座", "moon": "蟹座", "tagline": "強く見えて繊細タイプ", "details": ["前に出るけど傷つきやすい", "人の気持ちに敏感"], "quote": "別に平気" },
            { "sun": "牡羊座", "moon": "獅子座", "tagline": "主役気質の挑戦者", "details": ["勝ちたい", "認められたい"], "quote": "任せて" },
            { "sun": "牡羊座", "moon": "乙女座", "tagline": "行動派なのに自己チェック厳しめ", "details": ["動いたあとに反省", "完璧を求める"], "quote": "大丈夫かな…" },
            { "sun": "牡羊座", "moon": "天秤座", "tagline": "前に出るけど空気も気にする", "details": ["発言後に人間関係を気にする"], "quote": "言い過ぎたかな" },
            { "sun": "牡羊座", "moon": "蠍座", "tagline": "本気で動くタイプ", "details": ["決めたら引かない", "裏切りNG"], "quote": "譲らん" },
            { "sun": "牡羊座", "moon": "射手座", "tagline": "自由に突っ走るタイプ", "details": ["縛られるのが苦手"], "quote": "面白そう" },
            { "sun": "牡羊座", "moon": "山羊座", "tagline": "勢いと責任感の両立タイプ", "details": ["挑戦したい", "失敗したくない"], "quote": "やるならちゃんと" },
            { "sun": "牡羊座", "moon": "水瓶座", "tagline": "型破りな先頭者", "details": ["常識より自分の感覚"], "quote": "それ変やん？" },
            { "sun": "牡羊座", "moon": "魚座", "tagline": "優しすぎる挑戦者", "details": ["強く見えて共感体質"], "quote": "大丈夫" },
            { "sun": "牡牛座", "moon": "牡羊座", "tagline": "心は熱いけど腰は重いタイプ", "details": ["やりたい気持ちはある", "準備が整うまで動かない", "キレると一番怖い"], "quote": "やる時はやるよ" },
            { "sun": "牡牛座", "moon": "牡牛座", "tagline": "五感のスペシャリスト", "details": ["心地よさがすべて", "頑固さは12星座イチ", "好きなものに囲まれたい"], "quote": "これが好き" },
            { "sun": "牡牛座", "moon": "双子座", "tagline": "おしゃべりな現実主義者", "details": ["知識を実利に変えるのが上手", "喋るけど自分のテリトリーは守る", "美味しい情報には目がない"], "quote": "それ、得する？" },
            { "sun": "牡牛座", "moon": "蟹座", "tagline": "身内を全力で守る家守（やもり）", "details": ["居心地の良い場所作りが得意", "一度懐に入れたら離さない", "美味しいものを一緒に食べたい"], "quote": "家がいちばん" },
            { "sun": "牡牛座", "moon": "獅子座", "tagline": "ゆったり構える王様・女王様", "details": ["どっしりした存在感", "質の良いブランド品が好き", "指図されるのが大嫌い"], "quote": "私、これ持ってる" },
            { "sun": "牡牛座", "moon": "乙女座", "tagline": "几帳面な職人タイプ", "details": ["実益を伴う完璧主義", "コツコツ継続するのが得意", "無駄なことが嫌い"], "quote": "ちゃんとしたい" },
            { "sun": "牡牛座", "moon": "天秤座", "tagline": "美意識高めの平和主義者", "details": ["争いごとは時間の無駄", "綺麗なものと美味しいものが必須", "愛嬌はあるけど譲らない"], "quote": "綺麗が良いよね" },
            { "sun": "牡牛座", "moon": "蠍座", "tagline": "一点突破のこだわり派", "details": ["執着心と持続力が最強", "一度決めたら10年変わらない", "秘密主義なこだわり"], "quote": "絶対に離さない" },
            { "sun": "牡牛座", "moon": "射手座", "tagline": "のんびり自由人", "details": ["楽観的だけど現実的", "自分のペースで遠くに行きたい", "束縛はストレスの元"], "quote": "なんとかなるでしょ" },
            { "sun": "牡牛座", "moon": "山羊座", "tagline": "着実に登る堅実家", "details": ["結果がすべて", "時間をかけて財を成す", "無茶は絶対にしない"], "quote": "無駄は省こう" },
            { "sun": "牡牛座", "moon": "水瓶座", "tagline": "マイペースな変人", "details": ["自分の基準が世界の基準", "流行りよりも「自分の定番」", "頑固だけど考え方は合理的"], "quote": "私は私やし" },
            { "sun": "牡牛座", "moon": "魚座", "tagline": "癒やし系のロマンチスト", "details": ["感性が豊かでおっとり", "心地よい空気に流されたい", "実はかなり欲張りさん"], "quote": "幸せ～" },
            { "sun": "双子座", "moon": "牡羊座", "tagline": "光速で動く情報通", "details": ["思いついたら即メッセージ", "考えるより先に口が出る", "飽きるのも最速"], "quote": "おもしろそう、今行く！" },
            { "sun": "双子座", "moon": "牡牛座", "tagline": "おしゃべりな現実主義者", "details": ["知識を実利に変えるのが上手", "喋るけど自分のテリトリーは守る", "美味しい情報には目がない"], "quote": "それ、得する？" },
            { "sun": "双子座", "moon": "双子座", "tagline": "歩く検索エンジン", "details": ["常に何かを調べている", "同時に3つくらいのことをこなす", "深掘りより広さ重視"], "quote": "あ、それ知ってる！" },
            { "sun": "双子座", "moon": "蟹座", "tagline": "愛嬌のある聞き上手", "details": ["相手の感情を読み取って喋る", "仲間内のニュースが大好き", "実はかなり心配性"], "quote": "ここだけの話やけど" },
            { "sun": "双子座", "moon": "獅子座", "tagline": "華やかなエンターテイナー", "details": ["自分の話を面白く盛る天才", "目立ちたいけど軽やか", "褒められると調子に乗る"], "quote": "凄いやろ？" },
            { "sun": "双子座", "moon": "乙女座", "tagline": "精密な分析官", "details": ["細かい矛盾も見逃さない", "知識の整理整頓が趣味", "言葉選びがシビア"], "quote": "正確にはこうやで" },
            { "sun": "双子座", "moon": "天秤座", "tagline": "社交界の調整役", "details": ["誰とでも話を合わせられる", "争いを避けるためのトーク術", "決断は周りに任せがち"], "quote": "みんなはどう思う？" },
            { "sun": "双子座", "moon": "蠍座", "tagline": "鋭い洞察力の探偵", "details": ["表面的な会話の下を探る", "秘密主義なのに情報はしっかり収集", "言葉の端々に毒とユーモアが混じる"], "quote": "ホンマは違うやろ？" },
            { "sun": "双子座", "moon": "射手座", "tagline": "思考が宇宙規模の旅人", "details": ["常に新しい世界を求めている", "小さなことは気にしない", "どこへでも飛んでいく"], "quote": "どっか行こう！" },
            { "sun": "双子座", "moon": "山羊座", "tagline": "知的な戦略家", "details": ["無駄な喋りはしない", "有益な人脈作りが得意", "最終的なメリットを計算"], "quote": "で、結論は何？" },
            { "sun": "双子座", "moon": "水瓶座", "tagline": "時代の先を行く変人", "details": ["常識を疑うトリッキーな思考", "誰とも被らない視点", "ネットの世界がホーム"], "quote": "それ普通すぎて変" },
            { "sun": "双子座", "moon": "魚座", "tagline": "夢見がちな語り部", "details": ["妄望を喋りだすと止まらない", "相手の色に染まりやすい", "言葉にできない感覚を大事にする"], "quote": "そんな気がしてん" },
            { "sun": "蟹座", "moon": "牡羊座", "tagline": "身内を全力で守る熱血漢", "details": ["大切な人のためには戦う", "感情の起伏が激しくストレート", "守りたい一心で先走る"], "quote": "私が守るから！" },
            { "sun": "蟹座", "moon": "牡牛座", "tagline": "お家大好き安定派", "details": ["居心地の良い空間と食事が命", "変化を嫌い、今の幸せを維持したい", "お金も愛情も貯め込むタイプ"], "quote": "ずっとこうしてたい" },
            { "sun": "蟹座", "moon": "双子座", "tagline": "気配り上手な世話焼き", "details": ["相手の顔色を見て言葉を選ぶ", "身近なコミュニティを大切にする", "寂しくなると誰かに連絡する"], "quote": "最近どうしてる？" },
            { "sun": "蟹座", "moon": "蟹座", "tagline": "共感力マックスの守護神", "details": ["家族や仲間が人生のすべて", "感受性が強すぎて疲れやすい", "懐に入れた人は一生大事にする"], "quote": "一緒にいよ" },
            { "sun": "蟹座", "moon": "獅子座", "tagline": "面倒見のいい親分肌", "details": ["身内の中では王様・女王様", "頼われるとNOと言えない", "家族の誇りでありたい"], "quote": "任せとき！" },
            { "sun": "蟹座", "moon": "乙女座", "tagline": "細やかすぎるお世話係", "details": ["相手の健康や生活を細かく管理", "役に立ちたい気持ちが強い", "心配性でついつい口が出る"], "quote": "ちゃんと食べた？" },
            { "sun": "蟹座", "moon": "天秤座", "tagline": "愛されたい平和主義者", "details": ["場の空気を壊すのが何より嫌い", "誰からも好かれる自分でいたい", "寂しがり屋の社交家"], "quote": "みんな仲良くね" },
            { "sun": "蟹座", "moon": "蠍座", "tagline": "一途すぎる深い愛", "details": ["愛する人への執着心は最強", "裏切りは絶対に許さない", "秘密の共有を喜ぶ"], "quote": "裏切らんといてね" },
            { "sun": "蟹座", "moon": "射手座", "tagline": "放牧主義の優しい親", "details": ["愛情はあるけど束縛はしない", "家族と一緒に冒険したい", "感情の切り替えが意外と早い"], "quote": "自由にやっていいよ" },
            { "sun": "蟹座", "moon": "山羊座", "tagline": "責任感の塊の守護者", "details": ["愛情を「形（成果）」で示そうとする", "家のルールや伝統を重んじる", "弱音を吐かずに踏ん張る"], "quote": "私が支えるわ" },
            { "sun": "蟹座", "moon": "水瓶座", "tagline": "少しドライな博愛主義者", "details": ["家族愛はあるけど独自の距離感", "「普通」の家庭像に縛られない", "困っている人は放っておけない"], "quote": "適当でいいやん" },
            { "sun": "蟹座", "moon": "魚座", "tagline": "癒やしと共感の天使", "details": ["相手の悲しみを自分のことのように感じる", "尽くしすぎて自分を忘れる", "優しい空気に包まれていたい"], "quote": "わかるよ、大丈夫" },
            { "sun": "獅子座", "moon": "牡羊座", "tagline": "無敵のヒーロータイプ", "details": ["常に一番、常に主役", "負けるのが大嫌いで直球勝負", "圧倒的な突破力"], "quote": "私が1番や" },
            { "sun": "獅子座", "moon": "牡牛座", "tagline": "豪華主義な王様・女王様", "details": ["質が良くて目立つものが好き", "自分のスタイルを絶対崩さない", "どっしり構えて動かない"], "quote": "本物がいい" },
            { "sun": "獅子座", "moon": "双子座", "tagline": "華やかなエンターテイナー", "details": ["面白い話で注目を集める天才", "常に誰かに見ていてほしい", "多彩な才能を見せつけたい"], "quote": "凄いやろ？" },
            { "sun": "獅子座", "moon": "蟹座", "tagline": "身内にだけ甘えるリーダー", "details": ["外では堂々、家ではデレデレ", "仲間を誇りに思っている", "実はかなり寂しがり屋"], "quote": "褒めてほしい" },
            { "sun": "獅子座", "moon": "獅子座", "tagline": "圧倒的なカリスマ", "details": ["存在そのものがエンターテインメント", "自分を信じる力が最強", "妥協はプライドが許さない"], "quote": "私がルール" },
            { "sun": "獅子座", "moon": "乙女座", "tagline": "陰で努力する表現者", "details": ["見えないところで猛特訓", "「完璧な自分」を見せたい", "自己評価が意外と厳しめ"], "quote": "完璧やろ？" },
            { "sun": "獅子座", "moon": "天秤座", "tagline": "愛嬌たっぷりのスター", "details": ["華やかで誰からも好かれたい", "周りからの見え方を計算する", "褒め言葉が最高の栄養源"], "quote": "素敵に見える？" },
            { "sun": "獅子座", "moon": "蠍座", "tagline": "内に情熱を秘めた支配者", "details": ["黙っていても醸し出される威圧感", "自分の信念を曲げるくらいなら死ぬ", "認めた相手には深い敬意を払う"], "quote": "見てなよ" },
            { "sun": "獅子座", "moon": "射手座", "tagline": "スケールの大きな冒険家", "details": ["夢は大きく、行動は大胆", "常にワクワクする方へ進む", "小さな枠には収まらない"], "quote": "次は世界や" },
            { "sun": "獅子座", "moon": "山羊座", "tagline": "野心的な実力者", "details": ["頂点を目指して着実に歩む", "権威や地位を重んじる", "責任感の強いリーダー"], "quote": "勝つのは私" },
            { "sun": "獅子座", "moon": "水瓶座", "tagline": "唯一無二の個性派", "details": ["誰とも被らないことが誇り", "反抗心さえも自分の魅力にする", "型にハマるのが一番の苦痛"], "quote": "普通は嫌や" },
            { "sun": "獅子座", "moon": "魚座", "tagline": "ロマンチックな夢想家", "details": ["ドラマチックな展開が大好き", "繊細だけど自己表現は派手", "愛と夢の世界に生きたい"], "quote": "優しくして" },
            { "sun": "乙女座", "moon": "牡羊座", "tagline": "即断即決の完璧主義者", "details": ["おかしいと思ったら即座に指摘", "正論で相手を論破しがち", "動いたあとに一人で反省する"], "quote": "それ、違うやろ" },
            { "sun": "乙女座", "moon": "牡牛座", "tagline": "究極のこだわり職人", "details": ["丁寧な仕事と確かな審美眼", "納得いくまで何度でもやり直す", "実益のないことはやりたくない"], "quote": "ちゃんとやりたい" },
            { "sun": "乙女座", "moon": "双子座", "tagline": "神経質な情報処理マシン", "details": ["細かい知識を整理するのが得意", "口が達者で少し批判的", "常に頭がフル回転で疲れやすい"], "quote": "正確にはこうやで" },
            { "sun": "乙女座", "moon": "蟹座", "tagline": "献身的なお世話係", "details": ["相手の体調や変化にすぐ気づく", "役に立つことで愛情を実感", "心配しすぎて口うるさくなる"], "quote": "大丈夫？無理してない？" },
            { "sun": "乙女座", "moon": "獅子座", "tagline": "プライドの高い実力派", "details": ["完璧にこなして称賛されたい", "批判されると内心めちゃくちゃ凹む", "自分のやり方に強いこだわり"], "quote": "完璧やろ？" },
            { "sun": "乙女座", "moon": "乙女座", "tagline": "ミスのない管理官", "details": ["自分にも他人にも厳しい", "秩序が乱れるとストレス", "誰よりも早く間違いに気づく"], "quote": "そこ、ズレてる" },
            { "sun": "乙女座", "moon": "天秤座", "tagline": "気遣い上手な調整役", "details": ["場の空気を読みつつ、裏で整える", "清潔感とマナーを重視", "嫌われないように批判を飲み込む"], "quote": "綺麗にしておこう" },
            { "sun": "乙女座", "moon": "蠍座", "tagline": "不屈の探求者", "details": ["徹底的に調べて本質を見抜く", "信頼した人のためなら泥をかぶる", "一度疑うと止まらない"], "quote": "根拠は何？" },
            { "sun": "乙女座", "moon": "射手座", "tagline": "理論派の自由人", "details": ["細かいことを気にしつつ遠くを見ている", "知識を増やす旅が大好き", "意外と大雑把なところがある"], "quote": "多分大丈夫（ほんまかな…）" },
            { "sun": "乙女座", "moon": "山羊座", "tagline": "鉄壁のリアリスト", "details": ["計画通りに進めるのが快感", "感情よりも結果と実績", "1円単位まで計算が細かい"], "quote": "無駄は省こう" },
            { "sun": "乙女座", "moon": "水瓶座", "tagline": "ロジカルな異端児", "details": ["独自の分析で常識をぶった斬る", "システム化や効率化が大好き", "感情論を嫌うクールな人"], "quote": "それ、合理的じゃない" },
            { "sun": "乙女座", "moon": "魚座", "tagline": "繊細すぎる調整者", "details": ["相手を助けたいけど自分も不安", "直感と分析の間で揺れ動く", "頼まれると断りきれない"], "quote": "私がやるよ…" },
            { "sun": "天秤座", "moon": "牡羊座", "tagline": "社交的なのに負けず嫌い", "details": ["愛想はいいけど主導権は渡さない", "相手に合わせつつ、最後は自分の意見を通す", "決断は早いけど後で「大丈夫かな」と気にする"], "quote": "私が決めるね（いいよね？）" },
            { "sun": "天秤座", "moon": "牡牛座", "tagline": "五感にこだわる美意識の塊", "details": ["優雅な生活と美しいものが絶対", "争うくらいなら美味しいものを食べたい", "穏やかに見えて、譲れないこだわりが強い"], "quote": "綺麗なのがいちばん" },
            { "sun": "天秤座", "moon": "双子座", "tagline": "お喋りな情報通", "details": ["誰とでも会話を弾ませる天才", "常に旬な話題をアップデート", "浅く広く、人間関係を楽しむ"], "quote": "最近どうしてる？" },
            { "sun": "天秤座", "moon": "蟹座", "tagline": "愛され上手な気配り屋", "details": ["周囲の感情の変化に敏感", "誰からも嫌われたくないし、みんなで仲良くしたい", "身内への愛と外への愛想の使い分け"], "quote": "みんな仲良くね" },
            { "sun": "天秤座", "moon": "獅子座", "tagline": "華やかな社交界のスター", "details": ["褒められることで輝きを増す", "自分がどう見えているかを常に計算", "センスの良さには絶対の自信"], "quote": "素敵でしょ？" },
            { "sun": "天秤座", "moon": "乙女座", "tagline": "スマートな完璧主義者", "details": ["表向きはソフトだが、内面は超分析的", "マナーや身だしなみに厳しい", "場の空気を整えるのが上手"], "quote": "失礼がないように" },
            { "sun": "天秤座", "moon": "天秤座", "tagline": "調和を愛する平和の使者", "details": ["12星座イチ、空気を読むのが得意", "どちらの味方もしたくない（板挟みになりがち）", "優憂不断は「公平」でありたい証拠"], "quote": "どっちも良いよね" },
            { "sun": "天秤座", "moon": "蠍座", "tagline": "秘密を抱えた社交家", "details": ["誰とでも仲良くするが、本心は一握りの人にだけ", "観察眼が鋭く、相手の本音を見抜く", "執念深さを笑顔で隠す"], "quote": "（…見てるよ）" },
            { "sun": "天秤座", "moon": "射手座", "tagline": "自由を愛する楽天家", "details": ["社交的だけど束縛されるのは大嫌い", "フットワークが軽く、新しい出会いを求める", "重たい空気を感じると逃げたくなる"], "quote": "もっと楽しくいこう！" },
            { "sun": "天秤座", "moon": "山羊座", "tagline": "真面目な野心家", "details": ["人間関係をキャリアや実績に繋げる", "礼儀正しく、目上の人に好かれる", "意外と現実的で計算高い"], "quote": "きちんとしなきゃ" },
            { "sun": "天秤座", "moon": "水瓶座", "tagline": "クールで友好的な異端児", "details": ["誰に対しても平等、かつ一定の距離感", "ユニークなセンスで注目を浴びる", "依存関係を最も嫌う"], "quote": "自由が一番やん" },
            { "sun": "天秤座", "moon": "魚座", "tagline": "流されやすい癒し系", "details": ["相手の希望を叶えることが自分の喜び", "境界線が曖昧で、つい優しくしすぎる", "ドラマチックなロマンスに弱い"], "quote": "どっちでもいいよ" },
            { "sun": "蠍座", "moon": "牡羊座", "tagline": "不屈の精神を持つ戦士", "details": ["狙った獲物は逃さない", "怒らせると12星座イチ執念深い", "圧倒的な集中力と瞬発力"], "quote": "覚悟しときや" },
            { "sun": "蠍座", "moon": "牡牛座", "tagline": "究極のこだわり派", "details": ["独占欲と所有欲が最強", "好きなものは一生愛し抜く", "変化を嫌い、自分の世界を突き詰める"], "quote": "絶対に離さない" },
            { "sun": "蠍座", "moon": "双子座", "tagline": "裏の裏まで読み切る探偵", "details": ["相手の本音を暴くのが得意", "秘密主義なのに情報はしっかり収集", "言葉の端々に毒とユーモアが混じる"], "quote": "全部バレてるで" },
            { "sun": "蠍座", "moon": "蟹座", "tagline": "情に厚すぎる守護者", "details": ["愛する人を守るためなら何でもする", "絆を何よりも重んじる", "裏切りは地獄の果てまで許さない"], "quote": "一生一緒やで" },
            { "sun": "蠍座", "moon": "獅子座", "tagline": "カリスマ的な支配者", "details": ["黙っていても醸し出される威圧感", "自分の信念を曲げるくらいなら死ぬ", "認めた相手には深い敬意を払う"], "quote": "私を信じろ" },
            { "sun": "蠍座", "moon": "乙女座", "tagline": "精密な分析を行う職人", "details": ["細部まで調べ上げないと気が済まない", "完璧主義で、自分を追い込む", "批判的な視点が鋭すぎる"], "quote": "根拠は何？" },
            { "sun": "蠍座", "moon": "天秤座", "tagline": "ミステリアスな社交家", "details": ["笑顔で接するが、心の中には踏み込ませない", "人間関係のパワーバランスを見抜く", "スマートに見せて、実はかなり激しい"], "quote": "（…見てるよ）" },
            { "sun": "蠍座", "moon": "蠍座", "tagline": "深淵を覗く求道者", "details": ["0か100かの極端な思考", "徹底的に突き詰める精神力", "謎めいた雰囲気が最大の魅力"], "quote": "死ぬまで一緒" },
            { "sun": "蠍座", "moon": "射手座", "tagline": "真理を追究する冒険家", "details": ["興味があることには深く、遠くへ", "哲学的で、精神世界を旅する", "束縛を嫌う、蠍座の中の自由人"], "quote": "真実はどこ？" },
            { "sun": "蠍座", "moon": "山羊座", "tagline": "野心的な仕事人", "details": ["目標達成まで何年でも待つ", "洞察力が鋭く、敵に回すと一番怖い", "信頼した人との約束は絶対守る"], "quote": "最後に笑うのは私" },
            { "sun": "蠍座", "moon": "水瓶座", "tagline": "クールな革命家", "details": ["独自の美学で常識をぶち壊す", "誰にも左右されない強固な意志", "群めるのを嫌う一匹狼"], "quote": "それ、変やん？" },
            { "sun": "蠍座", "moon": "魚座", "tagline": "境界線のない癒し手", "details": ["相手の痛みを自分のことのように感じる", "尽くしすぎて一体化しようとする", "霊的な感性が非常に鋭い"], "quote": "繋がってるよ" },
            { "sun": "射手座", "moon": "牡羊座", "tagline": "爆速で突き進む冒険家", "details": ["考える前にもう走っている", "常に新しいターゲットを探す", "負ける気配が微塵もない"], "quote": "次、行こう！" },
            { "sun": "射手座", "moon": "牡牛座", "tagline": "五感を満たす旅人", "details": ["快適さと自由を両立したい", "意外と現実的なメリットを狙う", "自分のペースは絶対に崩さない"], "quote": "なんとかなるでしょ" },
            { "sun": "射手座", "moon": "双子座", "tagline": "フットワーク激軽の情報通", "details": ["常に何かを学び、動いている", "束縛されると一瞬で消える", "お喋りで知識欲が止まらない"], "quote": "それ、面白そう！" },
            { "sun": "射手座", "moon": "蟹座", "tagline": "放牧主義の愛妻家・愛夫家", "details": ["自由でいたいけど帰る場所は必要", "仲間と一緒に遠くへ行きたい", "感情のアップダウンが激しい"], "quote": "一緒に冒険しよ" },
            { "sun": "射手座", "moon": "獅子座", "tagline": "スケールの大きい主役", "details": ["夢はデカければデカいほどいい", "自分の可能性を信じて疑わない", "褒められるとどこまでも飛んでいく"], "quote": "世界は私のもの" },
            { "sun": "射手座", "moon": "乙女座", "tagline": "理論派の自由人", "details": ["分析しつつも、最後は直感で飛ぶ", "細かいことが気になるが無視したい", "知的好奇心が細部まで向かう"], "quote": "理屈はわかった、で？" },
            { "sun": "射手座", "moon": "天秤座", "tagline": "スマートな楽天家", "details": ["社交的で誰とでも旅ができる", "重苦しい関係は笑顔でスルー", "センス良く自由を謳歌する"], "quote": "楽しくやろうよ" },
            { "sun": "射手座", "moon": "蠍座", "tagline": "真理を追い求めるハンター", "details": ["興味を持ったらどん底まで深掘り", "執念深さと大胆さが共存", "嘘を見抜く力が異様に高い"], "quote": "本質はどこ？" },
            { "sun": "射手座", "moon": "射手座", "tagline": "止まったら死ぬマグロタイプ", "details": ["常にアップデートし続ける人", "哲学、旅、学びがガソリン", "過去を振り返る時間はゼロ"], "quote": "自由が最高！" },
            { "sun": "射手座", "moon": "山羊座", "tagline": "野心を持ったチャレンジャー", "details": ["高い目標を確実に仕留める", "自由を求めつつ社会的な地位も狙う", "意外とストイックで自分に厳しい"], "quote": "やるからには上へ" },
            { "sun": "射手座", "moon": "水瓶座", "tagline": "型破りな未来人", "details": ["常識なんて言葉はこの世にない", "独自の理論でどこまでも行く", "誰とも似ていない自分でいたい"], "quote": "それ、変でいいやん" },
            { "sun": "射手座", "moon": "魚座", "tagline": "直感だけで生きるロマンチスト", "details": ["夢の世界と現実を飛び越える", "流れに身を任せて遠くまで行く", "慈愛に満ちた自由人"], "quote": "なんとなく大丈夫" },
            { "sun": "山羊座", "moon": "牡羊座", "tagline": "最短距離で頂点を狙う人", "details": ["負けず嫌いで野心の塊", "決めたら即座に、かつ確実に動く", "弱音を吐かずに突き進む"], "quote": "勝たなあかん" },
            { "sun": "山羊座", "moon": "牡牛座", "tagline": "鉄壁の安定志向", "details": ["お金と実績は裏切らないと信じている", "コツコツ貯めて、着実に築く", "変化より継続、形になるものが好き"], "quote": "無駄は省こう" },
            { "sun": "山羊座", "moon": "双子座", "tagline": "スマートな戦略家", "details": ["情報を集めて効率的に結果を出す", "表向きは軽やかだが、計算は緻密", "役に立たない話には興味がない"], "quote": "で、メリットは何？" },
            { "sun": "山羊座", "moon": "蟹座", "tagline": "責任感の強すぎる保護者", "details": ["家族や身内を養うために必死で働く", "厳しいけれど愛がある", "伝統やルールを大切に守る"], "quote": "私が支えなあかん" },
            { "sun": "山羊座", "moon": "獅子座", "tagline": "威厳あるリーダー", "details": ["誰からも認められる地位が欲しい", "プライドを持って完璧に仕事をこなす", "堂々とした振る舞いで人を動かす"], "quote": "やるなら完璧に" },
            { "sun": "山羊座", "moon": "乙女座", "tagline": "緻密な実務のプロ", "details": ["ミスは許されない、自分に超厳しい", "計画通りに進まないと気が済まない", "1円、1分を大切にするリアリスト"], "quote": "きっちりやろう" },
            { "sun": "山羊座", "moon": "天秤座", "tagline": "社交的な野心家", "details": ["礼儀正しく、人脈を仕事に活かす", "好感度を保ちつつ、着実に昇進する", "場の空気を読みつつ、主導権を握る"], "quote": "きちんとしておこう" },
            { "sun": "山羊座", "moon": "蠍座", "tagline": "不言実行の仕事人", "details": ["目標達成まで何年でも待つ", "洞察力が鋭く、敵に回すと一番怖い", "信頼した人との約束は絶対守る"], "quote": "最後に笑うのは私" },
            { "sun": "山羊座", "moon": "射手座", "tagline": "理想を形にする冒険家", "details": ["夢を語るだけでなく、実現させる力がある", "スケールは大きいが、足元は固めている", "自由を求めつつ、責任は果たす"], "quote": "まずはやってみよ" },
            { "sun": "山羊座", "moon": "山羊座", "tagline": "ストイックな努力の天才", "details": ["感情を横に置いて結果を取りに行く", "怠ける自分が許せない", "孤独に耐えて頂点を目指す"], "quote": "結果がすべて" },
            { "sun": "山羊座", "moon": "水瓶座", "tagline": "ロジカルな革命家", "details": ["古いシステムを合理的に作り直す", "冷徹に見えるが、正義感は強い", "独自のルールで成果を出す"], "quote": "それ、効率悪いわ" },
            { "sun": "山羊座", "moon": "魚座", "tagline": "繊細な苦労人", "details": ["優しいけれど、やるべきことはやる", "夢を現実に落とし込む努力家", "誰かのために自分を追い込みがち"], "quote": "私がやらなきゃ…" },
            { "sun": "水瓶座", "moon": "牡羊座", "tagline": "恐れを知らない改革者", "details": ["新しいことに一番に飛びつく", "誰に何を言われても自分の道を爆走", "瞬発力のある天才肌"], "quote": "これ、面白くない？" },
            { "sun": "水瓶座", "moon": "牡牛座", "tagline": "マイペースなこだわり派", "details": ["独自の美学と価値観が絶対", "流行りよりも「自分にとっての定番」", "頑固さは12星座でもトップクラス"], "quote": "私は私やから" },
            { "sun": "水瓶座", "moon": "双子座", "tagline": "軽やかな情報発信者", "details": ["常に最新テクノロジーや知識を追求", "広く浅く、フラットな人間関係", "自由な発想で周りを驚かせる"], "quote": "それ、新しいな！" },
            { "sun": "水瓶座", "moon": "蟹座", "tagline": "一風変わった博愛主義者", "details": ["仲間を大切にするが、ベタベタしない", "独自のルールで家族や友人を守る", "感情よりも理想を優先しがち"], "quote": "みんな自由でええやん" },
            { "sun": "水瓶座", "moon": "獅子座", "tagline": "唯一無二の表現者", "details": ["目立ちたいが、普通に目立つのは嫌", "圧倒的な個性をブランド化する", "自分のセンスに絶対的な自信"], "quote": "変わってるって褒め言葉" },
            { "sun": "水瓶座", "moon": "乙女座", "tagline": "ロジカルな分析官", "details": ["社会の無駄を徹底的に批判・改善", "システム作りや効率化の天才", "クールで感情に流されない"], "quote": "それ、合理的じゃない" },
            { "sun": "水瓶座", "moon": "天秤座", "tagline": "スマートな平和主義者", "details": ["誰に対しても平等でフラットな距離", "センスが良く、どこか浮世離れしている", "依存関係を最も嫌う"], "quote": "ほどよくやろうよ" },
            { "sun": "水瓶座", "moon": "蠍座", "tagline": "信念を曲げない一匹狼", "details": ["内面に激しい情熱と独自の理論を持つ", "馴れ合いを嫌い、真実だけを求める", "徹底的に突き詰めるオタク気質"], "quote": "群める必要ある？" },
            { "sun": "水瓶座", "moon": "射手座", "tagline": "思考が宇宙へ飛ぶ自由人", "details": ["常識や国境すらも軽々と越えていく", "未来のことしか考えていない", "束縛されたら一瞬で消える"], "quote": "もっと自由にいこう" },
            { "sun": "水瓶座", "moon": "山羊座", "tagline": "現実的な革命家", "details": ["理想を形にするための戦略を持つ", "社会をアップデートしたい野心家", "意外と礼儀正しく、かつドライ"], "quote": "新しい仕組みを作ろう" },
            { "sun": "水瓶座", "moon": "水瓶座", "tagline": "生粋の宇宙人タイプ", "details": ["自分の世界観が完璧に完成されている", "「普通」が何か理解できない", "100年先を見ている先駆者"], "quote": "それ変やん？" },
            { "sun": "水瓶座", "moon": "魚座", "tagline": "不思議な魅力の癒し手", "details": ["理想主義で、世界平和を本気で願う", "掴みどころがないミステリアスな人", "直感で動く、感性の人"], "quote": "なんとかなるよ" },
            { "sun": "魚座", "moon": "牡羊座", "tagline": "直感で動く熱き夢想家", "details": ["根拠はないけど「いける」と信じる", "傷つきやすいが立ち直りも早い", "守りたい人のために豹変する"], "quote": "今、そう思った" },
            { "sun": "魚座", "moon": "牡牛座", "tagline": "心地よさを愛するロマンチスト", "details": ["綺麗な景色、美味しい食事が癒やし", "おっとりしているが、欲張りな一面も", "自分の好きな世界をコツコツ作る"], "quote": "幸せやな～" },
            { "sun": "魚座", "moon": "双子座", "tagline": "迷い多きお喋りさん", "details": ["相手の好みに合わせて会話を変える", "空想と現実の話が混ざりがち", "フットワークは軽いが、すぐ疲れる"], "quote": "どうしようかな？" },
            { "sun": "魚座", "moon": "蟹座", "tagline": "愛情あふれる癒やし手", "details": ["相手の痛みを自分のことのように感じる", "涙もろくて、とにかく優しい", "大切な人のためなら自己犠牲も厭わない"], "quote": "大丈夫、側にいるよ" },
            { "sun": "魚座", "moon": "獅子座", "tagline": "ドラマチックなヒロイン・ヒーロー", "details": ["映画のような人生に憧れる", "注目されると魔法にかかったように輝く", "繊細なのに、表現はダイナミック"], "quote": "見ててほしい" },
            { "sun": "魚座", "moon": "乙女座", "tagline": "献身的な完璧主義者", "details": ["誰かの役に立ちたくて細かく動く", "夢見がちだけど、実務もこなせる", "理想と現実のギャップに悩みやすい"], "quote": "ちゃんとしなきゃ…" },
            { "sun": "魚座", "moon": "天秤座", "tagline": "愛され上手な調整役", "details": ["争いごとは全力で回避する", "周りの空気を吸いすぎて自分を見失う", "いつも誰かと繋がっていたい"], "quote": "みんなが良ければいいよ" },
            { "sun": "魚座", "moon": "蠍座", "tagline": "底知れぬ愛を秘めた人", "details": ["好きになったら魂レベルで一体化したい", "洞察力が鋭く、言葉以外のメッセージを読む", "執念深さと慈悲深さが同居する"], "quote": "ずっと繋がってる" },
            { "sun": "魚座", "moon": "射手座", "tagline": "どこまでも行く夢追い人", "details": ["現実逃避がそのまま冒険になる", "精神的な自由を求めて彷徨う", "楽天的なようで、ふと寂しがる"], "quote": "どこか遠くへ行きたい" },
            { "sun": "魚座", "moon": "山羊座", "tagline": "夢を形にする努力家", "details": ["ふわふわしているようで、最後は着地する", "責任感が強く、頼まれると断れない", "現実的な厳しさを知っている魚座"], "quote": "やれるだけやるよ" },
            { "sun": "魚座", "moon": "水瓶座", "tagline": "不思議な魅力の癒し系", "details": ["誰に対しても優しいが、どこか掴めない", "独特な感性で世界を捉えている", "孤独を愛する、自由な癒やし系"], "quote": "みんな違っていいやん" },
            { "sun": "魚座", "moon": "魚座", "tagline": "境界線のない純粋な魂", "details": ["感情の海を漂う、生粋の感性の人", "霊感や直感が日常レベルで鋭い", "全てを受け入れる圧倒的な受容力"], "quote": "なんとかなるよ" }
        ];

        const zodiacSigns = ["牡羊座", "牡牛座", "双子座", "蟹座", "獅子座", "乙女座", "天秤座", "蠍座", "射手座", "山羊座", "水瓶座", "魚座"];

        /* --- 星座ロジック --- */
        function getSunSign(date) {
            const m = date.getMonth() + 1;
            const d = date.getDate();
            const h = date.getHours();
            const min = date.getMinutes();
            const decimalDay = d + (h / 24) + (min / 1440);
            const sunThresholds = [20.0, 19.5, 20.5, 20.5, 21.5, 21.5, 23.5, 23.5, 23.5, 23.5, 22.5, 22.2];
            const signs = ["山羊座", "水瓶座", "魚座", "牡羊座", "牡牛座", "双子座", "蟹座", "獅子座", "乙女座", "天秤座", "蠍座", "射手座"];
            return decimalDay < sunThresholds[m - 1] ? signs[m - 1] : signs[m % 12];
        }

        function getMoonSign(birthDate) {
            const d = (birthDate.getTime() - new Date('2000-01-01T12:00:00Z').getTime()) / (1000 * 60 * 60 * 24);
            const t = d / 36525;
            let lon = 218.316 + 481267.881 * t 
                + 6.289 * Math.sin((134.963 + 477198.867 * t) * Math.PI / 180)
                - 1.274 * Math.sin((134.963 + 477198.867 * t - 2 * (297.85 + 445267.111 * t)) * Math.PI / 180)
                + 0.658 * Math.sin(2 * (297.85 + 445267.111 * t) * Math.PI / 180);
            lon = (lon % 360 + 360) % 360;
            return zodiacSigns[Math.floor(lon / 30)];
        }

        let isMutedManually = false;

        function uranai() {
            const dVal = document.getElementById('birth-date').value;
            const tVal = document.getElementById('birth-time').value;
            if(!dVal || !tVal) return;
            const birth = new Date(`${dVal}T${tVal}`);
            const sun = getSunSign(birth);
            const moon = getMoonSign(birth);
            
            const music = document.getElementById('bgm');
            if(music && !isMutedManually) {
                music.play().catch(() => {});
            }

            const data = fortuneData.find(item => item.sun === sun && item.moon === moon) || {tagline:"神秘の境界線", details:["特別な星の配置"], quote:"そのままの君で"};
            
            const resultDiv = document.getElementById('result-display');
            resultDiv.style.display = 'block';
            resultDiv.classList.remove('fade-in');
            void resultDiv.offsetWidth; // リフロー強制でアニメーション再起動
            resultDiv.classList.add('fade-in');

            document.getElementById('res-signs').innerText = `${sun} × ${moon}`;
            document.getElementById('res-tagline').innerText = data.tagline;
            document.getElementById('res-quote').innerText = `「${data.quote}」`;
            
            const list = document.getElementById('res-details');
            list.innerHTML = "";
            data.details.forEach(text => {
                const li = document.createElement('li');
                li.innerText = text;
                list.appendChild(li);
            });

            if (window.innerWidth <= 700) {
                resultDiv.scrollIntoView({ behavior: 'smooth' });
            }
        }

        function shareX() {
            const signs = document.getElementById('res-signs').innerText;
            const tagline = document.getElementById('res-tagline').innerText;
            const text = encodeURIComponent(`私の魂の傾向は【${signs}】${tagline}でした。 #CosmicTendency`);
            const url = `https://twitter.com/intent/tweet?text=${text}`;
            window.open(url, '_blank');
        }

        function toggleMusic() {
            const music = document.getElementById('bgm');
            const btn = document.getElementById('toggle-btn');
            if (music.paused) {
                isMutedManually = false;
                music.play().catch(() => {});
                btn.classList.remove('muted');
                btn.innerText = "♪";
            } else {
                isMutedManually = true;
                music.pause();
                btn.classList.add('muted');
                btn.innerText = "×";
            }
        }

        function resetForm() {
            document.getElementById('birth-date').value = "";
            document.getElementById('birth-time').value = "";
            document.getElementById('result-display').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        /* --- 訪問カウント --- */
        (function() {
            try {
                let count = localStorage.getItem('visitCount') || 0;
                count = parseInt(count) + 1;
                localStorage.setItem('visitCount', count);
                const counterEl = document.getElementById('counter');
                counterEl.innerText = `Visit: ${count}`;
            } catch (e) {}
        })();
    </script>
</body>
</html>
